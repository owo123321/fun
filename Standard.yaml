# æ··åˆç«¯å£ HTTPå’ŒSOCKS5ç«¯å£å…±ç”¨
mixed-port: 7893
# TCP å¹¶å‘
tcp-concurrent: true
# å…è®¸å±€åŸŸç½‘è¿æ¥
allow-lan: true
# IPv6
ipv6: true
# TCP Keep Alive é—´éš”,å•ä½åˆ†é’Ÿ
keep-alive-interval: 30
# ç»Ÿä¸€å»¶è¿Ÿ
unified-delay: true
# è§„åˆ™æ¨¡å¼ï¼šrule/global/direct/script
mode: rule
# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«: silent/error/warning/info/debug
log-level: info
# å…¨å±€ TLS æŒ‡çº¹
global-client-fingerprint: chrome
# åŒ¹é…æ‰€æœ‰è¿›ç¨‹ï¼ˆalways/strict/offï¼‰
find-process-mode: strict

# ä½¿ç”¨geoip.datæ•°æ®åº“
geodata-mode: true
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"

profile:
  # å­˜å‚¨ select é€‰æ‹©è®°å½•
  store-selected: true 
  # æŒä¹…åŒ– fake-ip
  store-fake-ip: true  

# å—…æ¢åŸŸå
sniffer:               
  enable: true
  # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ true
  parse-pure-ip: true  
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    QUIC:
      ports: [443, 8443]

# Tun é…ç½®  
tun:
  enable: true
  # å¯é€‰ï¼š system/gvisor/mixedï¼›
  stack: mixed
  # dnsåŠ«æŒ,ä¸€èˆ¬è®¾ç½®ä¸º any:53 å³å¯, å³åŠ«æŒæ‰€æœ‰53ç«¯å£çš„udpæµé‡
  dns-hijack: [any:53]
        
dns:
  enable: true
  # IPV6
  ipv6: true
  # å¼€å¯ DoH æ”¯æŒ HTTP/3
  prefer-h3: true
  # DNSå¤„ç†æ¨¡å¼: normal/fake-ip/redir-host
  enhanced-mode: fake-ip
  # DNSç›‘å¬åœ°å€
  listen: 1053
  # Fake-IPè§£æåœ°å€æ± 
  fake-ip-range: 198.18.0.1/16
  # fakeip è¿‡æ»¤ï¼Œä»¥ä¸‹åœ°å€ä¸ä¼šä¸‹å‘ fakeip æ˜ å°„ç”¨äºè¿æ¥
  fake-ip-filter: 
    - "*"
    - "+.lan"
    - "+.invalid.*"
    - "+.localhost"
    - "+.local.*"
    - "+.time.*"
    - "+.ntp.*"
    - "+.time.edu.cn"
    - "+.ntp.org.cn"
    - "+.pool.ntp.org"
    - "+.qpic.cn"
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    - "dns.msftncsi.com"
    - "www.msftncsi.com"
    - "www.msftconnecttest.com"
    - "time1.cloud.tencent.com"
  # è§£æé IP çš„ dns ç”¨çš„ dns æœåŠ¡å™¨,åªæ”¯æŒçº¯ IP
  default-nameserver:
    - "2402:4e00::" # Tencent IPv6
    - "2400:3200::1"  # Alibaba IPv6
    - "119.29.29.29" # Tencent IPv4
    - "223.5.5.5" # Alibaba IPv4
  # é»˜è®¤çš„åŸŸåè§£ææœåŠ¡å™¨
  nameserver: 
    - "https://doh.pub/dns-query" # Tencent DoH
    - "https://223.5.5.5/dns-query" # Alibaba IPv4 DoH
  # æŒ‡å®šåŸŸåæŸ¥è¯¢çš„è§£ææœåŠ¡å™¨ï¼Œå¯ä½¿ç”¨ geosite, ä¼˜å…ˆäº nameserver/fallback æŸ¥è¯¢
  nameserver-policy:
  'geosite:cn': system
  'geosite:gfw,geolocation-!cn': [quic://223.5.5.5, quic://223.6.6.6, https://1.12.12.12/dns-query, https://120.53.53.53/dns-query]

# ç­–ç•¥ç»„å¼•ç”¨ç›¸å…³å‚æ•°
pg: &pg {type: select, proxies: [å†²æµª, åª’ä½“, è‡ªé€‰, DIRECT]}
# è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³å‚æ•°
p: &p {type: http, interval: 86400, health-check: {enable: true, url: http://latency-test.skk.moe/endpoint, interval: 1800}}
# è‡ªåŠ¨é€‰æ‹©ç­–ç•¥ç»„ï¼šé€‰å–å»¶è¿Ÿæœ€ä½èŠ‚ç‚¹
url-test: &url-test {type: url-test, url: http://latency-test.skk.moe/endpoint, interval: 300, tolerance: 0, include-all: true}
# æ‰‹åŠ¨é€‰æ‹©ç­–ç•¥ç»„ï¼šæ‰‹åŠ¨é€‰æ‹©æƒ³è¦çš„èŠ‚ç‚¹/ç­–ç•¥ç»„
select: &select {type: select, include-all: true}
# æ•…éšœå›é€€ç­–ç•¥ç»„ï¼šç­–ç•¥ç»„å°†æŒ‰é¡ºåºé€‰æ‹©ä½ åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹
fallback: &fallback {type: fallback, url: http://latency-test.skk.moe/endpoint, interval: 300, include-all: true}
# è´Ÿè½½å‡è¡¡ç­–ç•¥ç»„ï¼šä¸åŒçš„è¯·æ±‚å°†ä½¿ç”¨ä¸åŒçš„ä»£ç†èŠ‚ç‚¹
load-balance: &load-balance {type: load-balance, strategy: consistent-hashing, url: http://latency-test.skk.moe/endpoint, interval: 300, include-all: true}
# classicalè§„åˆ™ç›¸å…³
c: &c {type: http, behavior: classical, format: text, interval: 86400}
# domainè§„åˆ™ç›¸å…³
d: &d {type: http, behavior: domain, format: text, interval: 86400}
# ipcidrè§„åˆ™ç›¸å…³
i: &i {type: http, behavior: ipcidr, format: text, interval: 86400}

proxy-providers:
  Subscribe: {<<: *p, path: ./proxy-providers/Sub.yaml, url: http://your-service-provider}
    # åœ¨æ­¤å°†"http://your-service-provider"æ›¿æ¢ä¸ºä½ çš„æœºåœºè®¢é˜…ï¼Œæ¨èä½¿ç”¨ base64 æˆ–è€… node list
    # Sub-Storeç”Ÿæˆçš„é“¾æ¥,å¯ä»¥ç›´æ¥æ›¿æ¢ä¸Šè¿° url å¼•å·ä¸­çš„éƒ¨åˆ†,å…·ä½“è§ Sub-Store æ•™ç¨‹         

proxy-groups:

  #åˆ†æµåˆ†ç»„

  - {name: æºœæºœçƒ, type: select, include-all: true, proxies: [é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, DIRECT], icon: https://github.com/clash-verge-rev/clash-verge-rev/raw/main/src-tauri/icons/icon.png}

  - {name: æµåª’ä½“, <<: *pg, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png}

  - {name: å…¬ç›Šæœ, <<: *pg, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png}

  - {name: æ‰“ç”µåŠ¨, type: select, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_1.png}

  #èŠ‚ç‚¹åˆ†ç»„

  - {name: å†²æµª, <<: &fallback, filter: "(?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(HK|Hong)", icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png}

  - {name: åª’ä½“, <<: *url-test, filter: "(?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ´›æ‰çŸ¶|åœ£ä½•å¡|(\b(US|United States)\b)", icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png}

  - {name: è‡ªé€‰, type: select, filter: "(?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ)", icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png}

rule-providers:

  # å¼ºåˆ¶ç›´è¿
  UnBan: {<<: *c, path: ./rule-providers/UnBan.list,  url: https://raw.githubusercontent.com/owo123321/fun/main/UnBan.list}

  # å¼ºåˆ¶ä»£ç†
  Proxy: {<<: *c, path: ./rule-providers/Proxy.list,  url: https://raw.githubusercontent.com/owo123321/fun/main/Proxy.list}

  # å¹¿å‘Šæ‹¦æˆª
  BanProgramAD: {<<: *c, path: ./rule-providers/BanProgramAD.list, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list}
  BanAD: {<<: *c, path: ./rule-providers/BanAD.list, url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list}
  
  # å¾®ä¿¡
  WeChat: {<<: *c, path: ./rule-providers/WeChat.list,  url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.list}
  
  # æ¸¸æˆ
  Game: {<<: *c, path: ./rule-providers/Game.list,  url: https://raw.githubusercontent.com/owo123321/fun/main/Game.list}

  # å…¬ç›Šæœ
  Emby: {<<: *c, path: ./rule-providers/Emby.list,  url: https://raw.githubusercontent.com/owo123321/fun/main/Emby.list}
  
  # å›½é™…åª’ä½“
  ProxyMedia: {<<: *c, path: ./rule-providers/GlobalMedia.list,  url: https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/ProxyMedia.list}
  
  # Bing
  Bing: {<<: *c, path: ./rule-providers/Bing.list,  url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.list}
  
  rules:
  - RULE-SET,UnBan,DIRECT
  - RULE-SET,Proxy,æºœæºœçƒ
  - RULE-SET,BanProgramAD,REJECT
  - RULE-SET,BanAD,REJECT
  - RULE-SET,WeChat,DIRECT
  - RULE-SET,Game,æ‰“ç”µåŠ¨
  - RULE-SET,Emby,å…¬ç›Šæœ
  - RULE-SET,ProxyMedia,æµåª’ä½“
  - RULE-SET,Bing,æºœæºœçƒ
  - GEOIP,CN,DIRECT
  - MATCH,æºœæºœçƒ
